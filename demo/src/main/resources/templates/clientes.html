<div th:fragment="contenido">
  <h2 class="mt-5">Lista de Clientes</h2>
  <table id="clientesTable" class="table table-striped table-bordered mt-3">
    <thead>
      <tr>
        <th>ID</th>
        <th>Nombre</th>
        <th>Apellidos</th>
        <th>Correo</th>
        <th>Telefono</th>
        <th>Direcci√≥n</th>
        <th>Password</th>
      </tr>
    </thead>
    <tbody>
      <!-- clientes carga -->
    </tbody>
  </table>

  <script>
    (() => {
      async function fetchClientes() {
        try {
          const response = await fetch("/api/clientes");
          const clientes = await response.json();
          const tbody = document
            .getElementById("clientesTable")
            .getElementsByTagName("tbody")[0];
          tbody.innerHTML = "";

          clientes.forEach((cliente) => {
            const row = tbody.insertRow();
            row.insertCell(0).textContent = cliente.id;
            row.insertCell(1).textContent = cliente.nombre;
            row.insertCell(2).textContent = cliente.apellidos;
            row.insertCell(3).textContent = cliente.correo;
            row.insertCell(4).textContent = cliente.telefono;
            row.insertCell(5).textContent = cliente.direccion;
            row.insertCell(6).textContent = cliente.password;
          });
        } catch (error) {
          console.error("Error al cargar los clientes:", error);
        }
      }

      // Cargar clientes al iniciar
      fetchClientes();
    })();
  </script>
</div>
